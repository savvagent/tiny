var m=Object.create;var a=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var q=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var S=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var E=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of x(t))!R.call(n,r)&&r!==e&&a(n,r,{get:()=>t[r],enumerable:!(s=y(t,r))||s.enumerable});return n};var A=(n,t,e)=>(e=n!=null?m(q(n)):{},E(t||!n||!n.__esModule?a(e,"default",{value:n,enumerable:!0}):e,n));var f=S((C,g)=>{"use strict";var c=class{constructor(t,e={}){return this.ctx=e,this._path=[],this.parse(t)}append(t){return this._path.push(t),this.ctx}delete(t){return Array.isArray(t)?t.reverse().forEach(e=>this._path.splice(e,1)):Number.isInteger(t)?this._path.splice(t,1):this._path.pop(),this.ctx}get(){return this._path}parse(t=""){let e=decodeURIComponent(t),s=e.split("/");return Array.isArray(s)&&(e.match(/^\//)&&s.shift(),s[0]===""&&s.shift(),s.length>1&&e.match(/\/$/)&&s.pop(),this._path=s),this}replace(t,e){return e==="file"?(this._path.splice(this._path.length-1,1,t),this.ctx):Number.isInteger(e)?(this._path.splice(e,1,t),this.ctx):(this.parse(t),this.ctx)}toString(t){return t?this.ctx.toString():Array.isArray(this._path)?this._path.join("/"):""}},l=class{constructor(t,e={}){return Object.assign(this,e),this.ctx=e,this.set(t),this}add(t={}){return this._query=this._convert(t,this._query[0],this._query[1]),this.ctx}clear(){return this._query=[[],[]],this.ctx}_convert(t,e=[],s=[]){for(let r in t)if(Array.isArray(t[r]))for(let h=0;h<t[r].length;h++){let i=t[r][h];e.push(r),s.push(i)}else t[r]&&(e.push(r),s.push(t[r]));return[e,s]}get(t){let e={},s=this._query;for(let r=0;r<s[0].length;r++){let h=s[0][r],i=s[1][r];e[h]?e[h].push(i):e[h]=[i]}return t?e[t]&&e[t].length?e[t][0]:null:e}getUrlTemplateQuery(){return this._urlTemplateQueryString}merge(t){let e=this._query[0],s=this._query[1];for(let r in t){let h=!1;for(let i=0;i<e.length;i++){let p=e[i];if(r===p){if(h){e.splice(i,1),s.splice(i,1);continue}Array.isArray(t[r])?s[i]=t[r].shift():typeof t[r]>"u"||t[r]===null?(e.splice(i,1),s.splice(i,1),delete t[r]):(s[i]=t[r],delete t[r]),h=!0}}}return this._query=this._convert(t,this._query[0],this._query[1]),this.ctx}_parse(t=""){let e=[[],[]],s=t.split(/&|;/);for(let r=0;r<s.length;r++){let i=s[r].match(this.qRegEx);if(i&&typeof i[i.length-1]<"u"){i.shift();for(let p=0;p<i.length;p++){let d=i[p];e[p].push(decodeURIComponent(d.replace("+"," ","g")))}}}return e}set(...t){let e=[...t];if(e.length===1)typeof e[0]=="object"?this._query=this._convert(e[0]):this._query=this._parse(e[0]);else if(e.length===0)this.clear();else{let s={};s[e[0]]=e[1],this.merge(s)}return this.ctx}setUrlTemplateQuery(t){this._urlTemplateQueryString=t}toString(t){if(t)return this.ctx.toString();let e=[],s=this._query[0],r=this._query[1];for(let h=0;h<s.length;h++)e.push(encodeURIComponent(s[h])+"="+encodeURIComponent(r[h]));return e.join("&")}},o=class{constructor(t){!t||typeof t>"u"?this.string=String(""):this.string=String(t)}toString(){return this.string}append(t){return this.string+=t,this}insert(t,e){this.string.length;let s=this.string.slice(0,t),r=this.string.slice(t);return this.string=s+e+r,this}},u=class{constructor(t){return this.uriRegEx=/^(([^:/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,this.authRegEx=/^([^@]+)@/,this.portRegEx=/:(\d+)$/,this.qRegEx=/^([^=]+)(?:=(.*))?$/,this.urlTempQueryRegEx=/\{\?(.*?)\}/,this.parse(t)}authority(t=""){if(t!==""){let r=t.match(this.authRegEx);this._authority=t,r&&(t=t.replace(this.authRegEx,""),this.userInfo(r[1]));let h=t.match(this.portRegEx);return h&&(t=t.replace(this.portRegEx,""),this.port(h[1])),this.host(t.replace("{","")),this}let e=this.userInfo();e&&(t=e+"@"),t=t+this.host();let s=this.port();return s&&(t=t+(":"+s)),t}fragment(t=""){return this.gs(t,"_fragment")}gs(t,e,s){return typeof t<"u"?(this[e]=t,this):s?s(this[e]):this[e]?this[e]:""}host(t){return this.gs(t,"_host")}parse(t){let e=t?t.match(this.uriRegEx):[],s=t?t.match(this.urlTempQueryRegEx):[];return this.scheme(e[2]),this.authority(e[4]),this.path=new c(e[5]?e[5].replace(/{$/,""):"",this),this.fragment(e[9]),this.query=new l(e[7]?e[7]:"",this),s&&this.query.setUrlTemplateQuery(s[1]),this}port(t){return this.gs(t,"_port")}protocol(t){return(this._scheme||"").toLowerCase()}scheme(t){return this.gs(t,"_scheme")}userInfo(t){return this.gs(t,"_userinfo",e=>e&&encodeURI(e))}toString(){let t=this.query.toString(),e=this.path.toString();this.fragment();let s=this.scheme();return new o().append(s?s+"://":"").append(this.authority()).append("/").append(e).append(t!==""?"?":"").append(t).toString().replace("/?","?").replace(/\/$/,"")}static clone(t){return new u(t.toString())}};g.exports=u});var _=A(f(),1),I={request(n){let t=new _.default(n.url).query.add({rn:new Date().getTime().toString()}).toString();return new Request(t,n)},id:"TINY_FETCH_BUST_CACHE"},w=I;export{w as default};
//# sourceMappingURL=bust-cache.js.map
