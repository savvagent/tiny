var l=f=>f instanceof Request?f:new Request(f),d=(f,r)=>{let{url:n}=r;return new Request(n,{...r,method:f})};(()=>{var f=typeof window<"u",r=f;function n(t,{trigger:e="click",text:o=""}={}){let c=async()=>{r&&typeof navigator<"u"&&await navigator.clipboard.writeText(o).then(()=>t.dispatchEvent(new CustomEvent("copied",{detail:{clipboard:o}})),s=>t.dispatchEvent(new CustomEvent("error",{detail:{error:s}})))};return r&&t.addEventListener(e,c,!0),{update:s=>{s.trigger!==void 0&&(e=s.trigger),s.text!==void 0&&(o=s.text)},destroy(){t.removeEventListener(e,c,!0)}}}var i=(t,{default:e,xxs:o,xs:c,sm:s,md:u,lg:p,xl:g,xxl:y})=>{let a;switch(t){case"xxl":a=y??g??p??u??s??c??o??e;break;case"xl":a=g??p??u??s??c??o??e;break;case"lg":a=p??u??s??c??o??e;break;case"md":a=u??s??c??o??e;break;case"sm":a=s??c??o??e;break;case"xs":a=c??o??e;break;case"xxs":a=o??e;break;default:a=e;break}return a};function h(t){let e=o=>{t&&!t.contains(o.target)&&!o.defaultPrevented&&t.dispatchEvent(new CustomEvent("click_outside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}var x=t=>typeof t=="object"?JSON.parse(JSON.stringify(t)):t,I=x,v=t=>typeof t=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(t);function E(t,e){return v(e)?new Date(e):v(t)?new Date(t):e}function k(t){try{return JSON.parse(t),!0}catch{return!1}}var q=t=>k(t)?JSON.parse(t,E):t,A=q,O=t=>JSON.stringify(t),m=O;async function L(t){return m(t)}function H(){if(r){let t=typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches;return document.referrer.startsWith("android-app://")?"twa":navigator.standalone||t?"standalone":"browser"}}var j=()=>{},U=j,T=t=>{r&&document.body.appendChild(t)},$=T,J=class{constructor(){this.db=new Map}clear(){return this.db.clear()}del(t){return this.db.delete(t)}get(t){return this.db.get(t)}put(t,e){return this.set(t,e)}set(t,e){return this.db.set(t,e)}},M=class{constructor(){window.matchMedia("(display-mode: standalone)").matches?this.store=window.localStorage:this.store=window.sessionStorage}clear(){return this.store.clear()}del(t){return this.store.removeItem(t)}get(t){if(r)return A(this.store.getItem(t))}put(t,e){return this.store.setItem(t,m({...this.get(t),...e}))}set(t,e){return this.store.setItem(t,m(e))}},B=r?new M:new J,G=class{constructor(t){!t||typeof t>"u"?this.string="":this.string=String(t)}toString(){return this.string}append(t){return this.string+=t,this}insert(t,e){let o=this.string.length,c=this.string.slice(0,t),s=this.string.slice(t);return this.string=c+e+s,this}};function W(){let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?o:o&3|8).toString(16)})}var b=(t,e)=>{if(t===e)return!0;let o=Array.isArray(t),c=Array.isArray(e),s;if(o&&c){if(t.length!==e.length)return!1;for(s=0;s<t.length;s++)if(!b(t[s],e[s]))return!1;return!0}if(o!==c)return!1;if(t&&e&&typeof t=="object"&&typeof e=="object"){let u=Object.keys(t);if(u.length!==Object.keys(e).length)return!1;let p=t instanceof Date,g=e instanceof Date;if(p&&g)return t.getTime()===e.getTime();if(p!==g)return!1;let y=t instanceof RegExp,a=e instanceof RegExp;if(y&&a)return t.toString()===e.toString();if(y!==a)return!1;for(s=0;s<u.length;s++)if(!Object.prototype.hasOwnProperty.call(e,u[s]))return!1;for(s=0;s<u.length;s++)if(!b(t[u[s]],e[u[s]]))return!1;return!0}return!1},D=b,Z=(t,e)=>!D(t,e);function N(t){let e=t?.cookie,o=/([^;=\s]*)=([^;]*)/g,c={};for(let s;s=o.exec(e);)c[s[1]]=decodeURIComponent(s[2]);return c}function z(t,e){if(typeof document<"u"){let o=new RegExp("(?:^|;)\\s?"+t+"=(.*?)(?:;|$)","i"),c=document.cookie.match(o);return c&&c[1]?c[1]:""}return N(e)?.[t]}function F(t){return Array.isArray(t)}var R=t=>/\S+@\S+\.\S+/i.test(t),K=t=>!R(t);function P(t){let e=!1;return t==null||typeof t=="string"&&t===""?e=!0:t instanceof Date?e=!1:((Array.isArray(t)||typeof t=="string")&&t.length<1||typeof t=="string"&&!/\S/.test(t)||typeof t=="object"&&Object.keys(t).length<1||typeof t=="number"&&t===0)&&(e=!0),e}function Q(t){return!P(t)}var V=t=>typeof t=="object"&&!Array.isArray(t),X=t=>typeof t=="string",C=r&&typeof navigator<"u"&&navigator.languages&&navigator.languages.length?navigator.languages[0]:"en",Y=C.replace(/-.*/,"")})();var w=class{constructor(r=[],n){let i=typeof fetch=="function"&&typeof window<"u"?fetch.bind(window):typeof globalThis<"u"?fetch.bind(globalThis):n;this.cache=new Map,this.interceptors=[...r],this.requestPromise=null,this.requestMap=new Map,this.fetch=i}clear(){this.interceptors=[]}interceptor(r){let n=Promise.resolve(r);return this.interceptors.forEach(({request:i,requestError:h})=>{(i||h)&&(n=n.then(x=>i(x),h))}),n=n.then(i=>this.fetch(i)),this.interceptors.forEach(({response:i,responseError:h})=>{(i||h)&&(n=n.then(i,h))}),n}register(r,n){if(Array.isArray(r))this.interceptors=[...this.interceptors,...r];else{let i=Boolean(this.interceptors.find(h=>h.id===r.id));n!=="undefined"&&!i?this.interceptors.splice(n,0,r):i||(this.interceptors=[...this.interceptors,r])}}request(r){let n=l(r),i=JSON.stringify({url:n.url,method:n.method,...n.body&&(void 0)(n.body)&&{body:JSON.stringify(n.body)}});return this.cache.has(i)?this.cache.get(i):(this.cache.set(i,this.interceptor(n).finally(()=>this.cache.delete(i))),this.cache.get(i))}delete(r){let n=l(r),i=d("DELETE",n);return this.request(i)}get(r){let n=l(r),i=d("GET",n);return this.request(i)}head(r){let n=l(r),i=d("HEAD",n);return this.request(i)}patch(r){let n=l(r),i=d("PATCH",n);return this.request(i)}post(r){let n=l(r),i=d("POST",n);return this.request(i)}put(r){let n=l(r),i=d("PUT",n);return this.request(i)}unregister(r){this.interceptors=this.interceptors.filter(n=>n.id!==r)}get interceptors(){return this._interceptors}set interceptors(r){this._interceptors=r}},st=w;export{st as default};
//# sourceMappingURL=TinyFetch.js.map
